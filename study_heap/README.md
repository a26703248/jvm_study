# Java JVM 堆(Heap)
堆(Heap) 為 Java JVM 中最大的空間，且與方法區都為進程唯一，而一個進程可以有多個執行緒
1. 一個進程(JVM)只存在一個堆(Heap)
2. Java 堆(Heap)區在 JVM 啟動時被創建，其空間也被固定下來也是JVM中最大的空間
3. JVM 規範中，Java 堆(Heap)在物理上可以為不連續記憶體位址，但邏輯上應該被視為連續的
4. 所有執行緒共享一個 Java 堆(Heap)，除外還可以分出線程私有的緩衝區(Thread Local Allocation Buffer, TLAB)
5. JVM 規範中描述，所有的物件建立時應該被分配在堆(Heap)上儲存
6. 所有物件不會儲存在棧(Stack)，棧楨上只會儲存引用位址，引用會指向堆(Heap)實際物件位址
7. 方法結束時堆中物件不會馬上消失，在GC啟動時才會被回收
8. 堆(Heap)是GC主要垃圾回收機制的區域
![JVM 簡圖](./images/JVM%20簡圖.jpg)

### 堆主要細分
* Java1.7 以前
  1. 新生代
  2. 老年代
  3. 永久代
* Java1.8 以後
  1. 新生代
  2. 老年代
  3. 元空間